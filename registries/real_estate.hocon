# Copyright Â© 2025 Cognizant Technology Solutions Corp, www.cognizant.com.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# END COPYRIGHT
{
    include "registries/aaosa.hocon"

    "metadata": {
        "description": "Multi-agent system that provides help with real estate transaction inquiries. The top-level agent receives a question and, in coordination with down-chain agents, provides an answer. Includes Buyer, Seller, and Listing agents that form a tree-shaped network multiple layers deep. Some agents call coded tools such as the Brave search API for property listings and inspections.",
        "tags": ["AAOSA", "transactions", "web-search", "tool"],
        "sample_queries": [
            "What are the steps in purchasing a house?",
            "I want to sell my property, what do I need to do?",
            "Find me listings for 3-bedroom houses in San Francisco under $1 million"
        ]
    }

    "llm_config": {
        "model_name": "bedrock-us-claude-sonnet-4"
    },
    "instructions_prefix": """
You are in charge of a portion of company's realestate consulting services. The company is known as RealEstate.ai.
Only answer inquiries that are directly within your area of expertise, from the company's perspective.
Do not try to help for personal matters.
Do not mention what you can NOT do. Only mention what you can do.
""",

    "tools": [
        # This first agent definition is regarded as the "Front Man", which
        # does all the talking to the outside world/client.
        #
        # Some disqualifications from being a front man:
        #   1) Cannot use a CodedTool "class" definition
        #   2) Cannot use a Tool "toolbox" definition
        #
        # Besides the first agent being the front man, these tool definitions
        # do not have to be in any particular order. How they are linked and
        # call each other is defined within their own specs.
        # This could be a graph, potentially even with cycles.
        {
            "name": "RealEstateAgent",

            "function": {

                # The description acts as an initial prompt. 

                "description": """
                Your name is RealEstateAgent. You respond to user inquiries related to purchasing a property.
                Your down-chain agents (or tools) will help you determine your scope of operations.
                """
            },
            "instructions": """
You are the top-level agent responsible for handling all inquiries to company's real estate consulting services.
If a user inquires about property listing, use Listing_Agent to search for listing.
If a user wants to buy a property, use Buyer_Agent to satisfy the inquiry.
If a user wants to sell a property, use Seller_Agent to satisfy the inquiry.
When interacting with the user, act as the single point of interaction. No need to mention the other tools or agents.
If there are any requirements that need user input, ask them one at a time, with clear examples of the choices available.
            """,
            "tools": ["Buyer_Agent", "Seller_Agent", "Listing_Agent"]
        },
        {
            "name": "Buyer_Agent",
            "function": ${aaosa_call},
            "instructions": ${instructions_prefix} """
You represent the buyer's interest. You collect buyer's preferences and budget, search for properties using the Listing_Agent and schedule property viewings.
If the buyer decides to make an offer, you communicate with the Appraiser_Agent, Mortgage_Agent, and Inspection_Agent to appraise the property,
get a mortgage loan, and inspect the property.
            """ ${aaosa_instructions},
            "command": ${aaosa_command},
            "tools": ["Listing_Agent", "Appraiser_Agent", "Mortgage_Agent", "Inspection_Agent", "Legal_Agent"]
        },
        {
            "name": "Seller_Agent",
            "function": ${aaosa_call},
            "instructions": ${instructions_prefix} """
You represent the property seller. You list property details, set pricing and negotiation thresholds, coordinate with Listing_Agent, and approve or reject offers.
            """ ${aaosa_instructions},
            "command": ${aaosa_command},
            "tools": ["Listing_Agent", "Legal_Agent"]
        },
#        {
#            "name": "Listing_Agent",
#            "function": ${aaosa_call},
#            "instructions": ${instructions_prefix} """
#You manage property listings. You maintain an database of properties, provide property search and filtering functionality, and interface with Buyer_Agent and Seller_Agent.
#            """ ${aaosa_instructions},
#            "command": ${aaosa_command}
#        },
        {
            "name": "Listing_Agent",
            "function": {
                "description": "Assist caller with searching the web via Brave search API.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "user_inquiry": {
                            "type": "string",
                            "description": """
                                An inquiry from a user.
                                """
                        },
                    },
                    "required": ["user_inquiry"]
                }
            },

            "instructions": """
Use your tool to respond to the inquiry.
""",
            "tools": ["/brave_search"]

            "allow": {
                "from_downstream": {
                    # Report messages from the external tool that is downstream.
                    # For "security by default" this is normally off, but for
                    # illustrative purposes and debugging, it's useful to have on.
                    # Most agents would not want to have this reporting on
                    # in a production environment.
                    "reporting": [ "/brave_search" ]
                }
            }
        },
        {
            "name": "Appraiser_Agent",
            "function": ${aaosa_call},
            "instructions": ${instructions_prefix} """
You provide valuation of properties. You analuze market trends and property features, generate estimated value reports, and assist Buyer_Agent and Mortgage_Agent in decision making.
            """ ${aaosa_instructions},
            "command": ${aaosa_command}
        },
        {
            "name": "Mortgage_Agent",
            "function": ${aaosa_call},
            "instructions": ${instructions_prefix} """
You handle loan pre-approval and financing options. You assess buyer's creditworthiness, recommend suitable mortgage plans, and coordinate with Buyer_Agent and banks.
            """ ${aaosa_instructions},
            "command": ${aaosa_command}
        },
        {
            "name": "Inspection_Agent",
            "function": {
                "description": "Assist caller with searching the web via Brave search API.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "user_inquiry": {
                            "type": "string",
                            "description": """
                                An inquiry from a user.
                                """
                        },
                    },
                    "required": ["user_inquiry"]
                }
            },

            "instructions": """
Use your tool to respond to the inquiry.
""",
            "tools": ["/brave_search"]

            "allow": {
                "from_downstream": {
                    # Report messages from the external tool that is downstream.
                    # For "security by default" this is normally off, but for
                    # illustrative purposes and debugging, it's useful to have on.
                    # Most agents would not want to have this reporting on
                    # in a production environment.
                    "reporting": [ "/brave_search" ]
                }
            }
        },
        {
            "name": "Legal_Agent",
            "function": ${aaosa_call},
            "instructions": ${instructions_prefix} """
You ensure legal compliance and manage legal documentation. You verify title deeds and ownership, and draft sales agreements and contracts.
            """ ${aaosa_instructions},
            "command": ${aaosa_command}
        }
    ]
}
