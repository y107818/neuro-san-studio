# Copyright Â© 2025 Cognizant Technology Solutions Corp, www.cognizant.com.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# END COPYRIGHT
{
    # Importing content from other HOCON files
    # The include keyword must be unquoted and followed by a quoted URL or file path.
    # File paths should be absolute or relative to the script's working directory, not the HOCON file location.

    # This "aaosa.hocon" file contains key-value pairs used for substitution.
    # Specifically, it provides values for the following keys:
    #   - aaosa_call
    #   - aaosa_command
    #   - aaosa_instructions
    #
    # IMPORTANT:
    # Ensure that you run `python -m run` from the top level of the repository.
    # The path to this substitution file is **relative to the top-level directory**,
    # so running the script from elsewhere may result in file not found errors.

    include "registries/aaosa.hocon"

    "metadata": {
        "description": "Context Reactive User Experience (CRUSE) agentic interface that determines user intent from interaction context and dynamically generates UI elements. Called from Flask app to provide form-augmented interface interaction. Can attach to any agent network to enable context-reactive user experience with automatically generated forms based on conversation state.",
        "tags": ["tool", "AAOSA"],
        "sample_queries": [
            "I'd like to take next week off",
            "Our office network is down. I'd like to tether to my personal phone",
            "I need to return a pair of jeans I bought at the store"
        ]
    },
    
    "llm_config": {
        "model_name": "bedrock-us-claude-sonnet-4",
    },
    "tools": [
        # This first agent definition is regarded as the "Front Man", which
        # does all the talking to the outside world/client.
        #
        # Some disqualifications from being a front man:
        #   1) Cannot use a CodedTool "class" definition
        #   2) Cannot use a Tool "toolbox" definition
        #
        # Besides the first agent being the front man, these tool definitions
        # do not have to be in any particular order. How they are linked and
        # call each other is defined within their own specs.
        # This could be a graph, potentially even with cycles.
        {
            "name": "cruse",

            "function": {
                "description": "Enable form-augmented interface interaction.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "user_inquiry": {
                            "type": "string",
                            "description": """
                            An inquiry from a user.
                            """
                        },
                        "ui_state": {
                            "type": "string",
                            "description": """
                            The state of the user interface at the time of inquiry.
                            """
                        },
                    },
                    "required": ["user_inquiry"]
                }
            },

            "instructions": """
Use your tool to respond to the inquiry. Note that the inquiry might have a text part, as well as a UI context part,
which is what the user did in the UI. You should send both to your tool.
Once you get the tool's response, you should always present it to the user as a chat text, prefaced by 'say:' as well as a html form, prefaced by 'gui:' that
will be rendered in the interface so the user can respond to requirements either in chat, or using the html form,
or a combination of both. Make the form look good. The form will be injected into the following tag:
<form id="assistant-gui" class="gui-box">
    <!-- dynamic form content will be injected here -->
</form>
For the gui, do not start with any extra characters such as ```html. Only give the html tags you want us to render as part of the form.
Always try to be helpful and generate a form for any options or requirements needed from the user.
Be creative about what you include in the form.
The form's look and feel should be relevant to the topic.
Feel free to include images from the internet, emojis, internet links, various styles etc.
Do not include any submit button. We will take care of that.
Do not include anything outside of what has been returned by your tools.
Your role is only to best convey and present what you receive from your tools, but to do so using visual and UI elements in an html form.
If your tool requires any mandatory or optional information from the user. make sure they are presented as form elements in the gui.
Don't forget to always start your responses with 'say:' and/or 'gui:'.
Always use your tool to respond. Never respond without calling your tool first. Your tool is the expert, not you.
            """ ${aaosa_instructions},
            "tools": ["domain_expert"]
        },
        {
            "name": "domain_expert",
            "function": ${aaosa_call},
            "class": "call_agent.CallAgent",
        },
    ]
}
