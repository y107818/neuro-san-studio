# Copyright © 2025 Cognizant Technology Solutions Corp, www.cognizant.com.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# END COPYRIGHT

# To use this agent network, start by installing the required package:
#     pip install arxiv

{
    "llm_config": {
        "model_name": "bedrock-us-claude-sonnet-4",
    },

    # Optional metadata describing this agent network
    "metadata": {
        "description": "ArXiv RAG assistant that retrieves and answers queries using academic papers from arXiv.org, supporting full PDF text or abstracts with configurable retrieval parameters.",
        "tags": ["rag", "arxiv", "tool"],
        "sample_queries": [
            "Please give me a list of research papers on LORA",
            "Find recent papers about transformer architectures",
            "What are the latest developments in quantum machine learning?",
        ]
    },
    
    "tools": [
        {
            "name": "Arxiv_RAG_Assistant",

            "function": {
              "description": "Answer caller's query with answers from tools.",
            },

            "instructions": """Always use your tool to respond to the inquiry.
            If the tool failed or unavailable, just notify the user.
            Do not attempt to answer the question by yourself.""",

            "tools": ["rag_retriever"]
        },
        # RAG tool that retrieves relevant data from Arxiv to answer user queries.
        {
            "name": "rag_retriever",

            "toolbox": "arxiv_rag",

            "args": {
                # User-defined arguments for the tool

                # --- Optional Arguments ---

                # Maximum number of arXiv docs to load
                # Start small and increase value only if answers lack context
                # Recommended values:
                # Fast experimentation (lightweight context): 3–5
                # Deeper context (survey / related work scan): 8–15
                "top_k_results": "3",

                # Content scope:
                # True = full PDF text (slower, richer context)
                # False = abstracts only (faster, smaller)
                "get_full_documents": "True",

                # Per-document character cap to keep long pages from inflating context/cost
                # Token math: ~1 token ≈ 4 chars
                # Total doc tokens ≈ (K * doc_content_chars_max) / 4  (K = top_k_results)
                # Budget docs to a small share of the model’s max tokens (aim ~6–10%; increase if answers lack context)
                # Need more coverage? lower per-doc cap. Need more detail per doc? lower K
                "doc_content_chars_max": "4000",

                # Metadata scope: 
                # True = full arXiv metadata (journal ref, categories, comments)
                # False = minimal metadata (title, authors, abstract, published)
                "load_all_available_meta": "False",

                # Error handling:
                # True = continue on retrieval/parsing errors
                # False = fail fast
                "continue_on_failure": "True",
            }
        }
    ]
}
